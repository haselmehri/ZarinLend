@model RequestFacilityDetailModel
@if (Model != null)
{
    var title = "جزئیات درخواست تسهیلات";
    if (User.IsInRole(RoleEnum.Buyer.ToString()) || User.IsInRole(RoleEnum.SuperAdmin.ToString()) || User.IsInRole(RoleEnum.Admin.ToString()) || User.IsInRole(RoleEnum.ZarinLendExpert.ToString()))
    {
        title = $"جزئیات درخواست تسهیلات(<span class='text-primary'>{Model.UserOption.ToDisplay()}</span>)";
    }
    <div class="p-2 bg-white rounded-lg">
        <div class="text-bold-900 secondary darken-4 font-medium-3">
            @Html.Raw(title)
        </div>
        <div class="border rounded mt-2">
            @if (Model.GuarantorIsRequired)
            {
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-100">
                        @*<span class="font-small-2 text-bold-500">تعداد اقساط</span>*@
                        <span class="text-danger text-bold-500">تسهیلات فوق نیاز به معرفی ضامن دارد</span>
                    </div>
                </div>
                <hr class="m-0 p-0" />
            }
            @if (User.IsInRole(RoleEnum.Buyer.ToString()) || 
                 User.IsInRole(RoleEnum.SuperAdmin.ToString()) || 
                 User.IsInRole(RoleEnum.Admin.ToString()) || 
                 User.IsInRole(RoleEnum.ZarinLendExpert.ToString()) || 
                 User.IsInRole(RoleEnum.Buyer.ToString()))
            {
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">تعداد اقساط</span>
                        <span class="dark mt-50 text-bold-400">@Model.MonthCountTitle قسط</span>
                    </div>
                    <div class="border-left border-top"></div>
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ هر قسط</span>
                        <span class="dark mt-50 text-bold-400">@Model.AmountInstallment.ToString("N0") ريال</span>
                    </div>
                </div>
                <hr class="m-0 p-0" />
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ سفته ضمانت</span>
                        <span class="dark mt-50 text-bold-400">@Model.ChequeAmountWarranty.ToString("N0") ريال</span>
                    </div>
                    <div class="border-left border-top"></div>
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">هزینه ی عضویت در باشگاه مشتریان</span>
                        <span class="dark mt-50 text-bold-400">@Model.PrePaymentOrFee.ToString("N0") ريال</span>
                    </div>
                </div>
                <hr class="m-0 p-0" />
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ تسهیلات</span>
                        <span class="dark mt-50 text-bold-400">@Model.Amount.ToString("N0") ريال</span>
                    </div>
                    <div class="border-left border-top"></div>
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">جمع کل پرداختی(اقساط+هزینه ی عضویت)</span>
                        <span class="dark mt-50 text-bold-400">@((Model.TotalInstallment + Model.PrePaymentOrFee).ToString("N0")) ريال</span>
                    </div>
                </div>
            }
            else
            {
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ تسهیلات</span>
                        <span class="dark mt-50 text-bold-400">@Model.Amount.ToString("N0") ريال</span>
                    </div>
                    <div class="border-left border-top"></div>
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ سفته ضمانت</span>
                        <span class="dark mt-50 text-bold-400">@Model.ChequeAmountWarranty.ToString("N0") ريال</span>
                    </div>
                </div>
                <hr class="m-0 p-0" />
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">تعداد اقساط</span>
                        <span class="dark mt-50 text-bold-400">@Model.MonthCountTitle قسط</span>
                    </div>
                    <div class="border-left border-top"></div>
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">مبلغ هر قسط</span>
                        <span class="dark mt-50 text-bold-400">@Model.AmountInstallment.ToString("N0") ريال</span>
                    </div>
                </div>
            }
            @if (!string.IsNullOrEmpty(Model.SignedContractByBankFileName) || !string.IsNullOrEmpty(Model.SignedContractByUserFileName))
            {
                <hr class="m-0 p-0" />
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex justify-content-center py-2 px-1 w-100">
                        @if (!string.IsNullOrEmpty(Model.SignedContractByBankFileName))
                        {
                            <a class="btn btn-outline-info ml-1" target="_blank" href="~/UploadFiles/RequestFacilityContract/@Model.SignedContractByBankFileName">
                                دانلود قرارداد تسهیلات(امضاء شده توسط بانک)&nbsp;<i class="fal fa-file-pdf"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(Model.SignedContractByUserFileName))
                        {
                            <a class="btn btn-outline-primary mr-1" target="_blank" href="~/UploadFiles/RequestFacilityContract/@Model.SignedContractByUserFileName">
                                دانلود قرارداد تسهیلات(امضاء شده توسط مشتری)&nbsp;<i class="fal fa-file-pdf"></i>
                            </a>
                        }
                    </div>
                </div>
            }
            @if (Model.UsagePlaceList != null && Model.UsagePlaceList.Any())
            {
                <hr class="m-0 p-0" />
                <div class="d-flex flex-column flex-sm-row">
                    <div class="d-flex flex-column justify-content-start py-2 px-1 w-50">
                        <span class="font-small-2 text-bold-500">محل مصرف اعتبار</span>
                        <span class="dark mt-50 text-bold-400">
                            @($"{string.Join(" / ", Model.UsagePlaceList)}{(!string.IsNullOrEmpty(Model.UsagePlaceOtherDescription) ? $"({Model.UsagePlaceOtherDescription})" : string.Empty)}")
                        </span>
                    </div>
                </div>
            }
        </div>
    </div>
}
<script on-content-loaded="true">

</script>
